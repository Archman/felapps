<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>felapps.utils.funutils &mdash; felapps 1.5.13 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.5.13',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="felapps 1.5.13 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">felapps 1.5.13 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for felapps.utils.funutils</h1><div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="c1">#-------------------------------------------------------------------------#</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Author: Tong Zhang</span>
<span class="sd">Created Time: 11:09, Jan. 29, 2015</span>

<span class="sd">utilities/functions for convenience</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1">#-------------------------------------------------------------------------#</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>

<span class="kn">import</span> <span class="nn">wx</span>
<span class="kn">import</span> <span class="nn">wx.lib.mixins.listctrl</span> <span class="k">as</span> <span class="nn">listmix</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.colors</span> <span class="k">as</span> <span class="nn">colors</span>
<span class="kn">from</span> <span class="nn">matplotlib.text</span> <span class="k">import</span> <span class="n">Text</span> <span class="k">as</span> <span class="n">mText</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="k">import</span> <span class="n">Line2D</span> <span class="k">as</span> <span class="n">mLine</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">EnhancedStatusBar</span> <span class="k">as</span> <span class="n">ESB</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">uiutils</span>

<span class="kn">import</span> <span class="nn">lmfit</span>


<div class="viewcode-block" id="rescaleImage"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.rescaleImage">[docs]</a><span class="k">def</span> <span class="nf">rescaleImage</span><span class="p">(</span><span class="n">image0</span><span class="p">,</span> <span class="n">scaledFac</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Jan. 28, 2105</span>
<span class="sd">    rescale image, given the image full path on disk</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">#originalImage = wx.Image(imagePath, type = wx.BITMAP_TYPE_ANY)</span>
    <span class="n">originalImage</span> <span class="o">=</span> <span class="n">image0</span>
    <span class="n">imgW</span><span class="p">,</span> <span class="n">imgH</span> <span class="o">=</span> <span class="n">originalImage</span><span class="o">.</span><span class="n">GetSize</span><span class="p">()</span>
    <span class="n">scaledImage</span> <span class="o">=</span> <span class="n">originalImage</span><span class="o">.</span><span class="n">Scale</span><span class="p">(</span><span class="n">imgW</span><span class="o">*</span><span class="n">scaledFac</span><span class="p">,</span> <span class="n">imgH</span><span class="o">*</span><span class="n">scaledFac</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">scaledImage</span></div>


<div class="viewcode-block" id="findObj"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.findObj">[docs]</a><span class="k">def</span> <span class="nf">findObj</span><span class="p">(</span><span class="n">objroot</span><span class="p">,</span> <span class="n">objclass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Find all the objects that is instance of objclass belongs to objroot.</span>
<span class="sd">    obj</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objfound</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">objroot</span><span class="p">):</span>
        <span class="n">obji</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;objroot.&#39;</span> <span class="o">+</span>  <span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obji</span><span class="p">,</span> <span class="n">objclass</span><span class="p">):</span>
            <span class="n">objfound</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">obji</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">objfound</span></div>


<div class="viewcode-block" id="MySpinCtrl"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MySpinCtrl">[docs]</a><span class="k">class</span> <span class="nc">MySpinCtrl</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SpinCtrl</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    font: wx.Font()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">SpinCtrl</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MySpinCtrl.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MySpinCtrl.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MySpinCtrl.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MySpinCtrl.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span></div>

<div class="viewcode-block" id="MySpinCtrl.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MySpinCtrl.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MySpinCtrl.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MySpinCtrl.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyStaticText"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyStaticText">[docs]</a><span class="k">class</span> <span class="nc">MyStaticText</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MyStaticText.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyStaticText.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyStaticText.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyStaticText.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyStaticText.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyStaticText.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyStaticText.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyStaticText.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyTextCtrl"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyTextCtrl">[docs]</a><span class="k">class</span> <span class="nc">MyTextCtrl</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MyTextCtrl.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyTextCtrl.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyTextCtrl.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyTextCtrl.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetDefaultStyle</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TextAttr</span><span class="p">(</span><span class="n">colText</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">))</span></div>

<div class="viewcode-block" id="MyTextCtrl.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyTextCtrl.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyTextCtrl.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyTextCtrl.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyCheckBox"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyCheckBox">[docs]</a><span class="k">class</span> <span class="nc">MyCheckBox</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">CheckBox</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">CheckBox</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MyCheckBox.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyCheckBox.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyCheckBox.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyCheckBox.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span></div>
        <span class="c1">#self.SetDefaultStyle(wx.TextAttr(colText = self.fontcolor))</span>

<div class="viewcode-block" id="MyCheckBox.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyCheckBox.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyCheckBox.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyCheckBox.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyButton"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyButton">[docs]</a><span class="k">class</span> <span class="nc">MyButton</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MyButton.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyButton.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyButton.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyButton.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="n">fontcolor</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyButton.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyButton.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyButton.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyButton.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyComboBox"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyComboBox">[docs]</a><span class="k">class</span> <span class="nc">MyComboBox</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">ComboBox</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">font</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetFont</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span>  <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span>

<div class="viewcode-block" id="MyComboBox.setFontSize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyComboBox.setFontSize">[docs]</a>    <span class="k">def</span> <span class="nf">setFontSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyComboBox.setFontColor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyComboBox.setFontColor">[docs]</a>    <span class="k">def</span> <span class="nf">setFontColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontcolor</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span> <span class="o">=</span> <span class="n">fontcolor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontcolor</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyComboBox.setFontFaceName"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyComboBox.setFontFaceName">[docs]</a>    <span class="k">def</span> <span class="nf">setFontFaceName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">facename</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">facename</span> <span class="o">=</span> <span class="n">facename</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="o">.</span><span class="n">SetFaceName</span><span class="p">(</span><span class="n">facename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">font</span><span class="p">)</span></div>

<div class="viewcode-block" id="MyComboBox.setFont"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyComboBox.setFont">[docs]</a>    <span class="k">def</span> <span class="nf">setFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">font</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="MyListCtrl"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.MyListCtrl">[docs]</a><span class="k">class</span> <span class="nc">MyListCtrl</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">ListCtrl</span><span class="p">,</span> <span class="n">listmix</span><span class="o">.</span><span class="n">ListCtrlAutoWidthMixin</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">DefaultPosition</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">DefaultSize</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">ListCtrl</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">ID</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">style</span><span class="p">)</span>
        <span class="n">listmix</span><span class="o">.</span><span class="n">ListCtrlAutoWidthMixin</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="createwxStaticText"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.createwxStaticText">[docs]</a><span class="k">def</span> <span class="nf">createwxStaticText</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">DefaultSize</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ALIGN_LEFT</span><span class="p">,</span> 
        <span class="n">fontname</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">,</span> 
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings_GetFont</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetWeight</span><span class="p">(</span><span class="n">fontweight</span><span class="p">)</span>
    <span class="n">st</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticText</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> 
            <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
    <span class="n">st</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
    <span class="n">st</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="n">fontcolor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">st</span></div>


<div class="viewcode-block" id="createwxTextCtrl"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.createwxTextCtrl">[docs]</a><span class="k">def</span> <span class="nf">createwxTextCtrl</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TE_LEFT</span><span class="p">,</span>
        <span class="n">fontname</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings_GetFont</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetWeight</span><span class="p">(</span><span class="n">fontweight</span><span class="p">)</span>
    <span class="n">textctrl</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">TextCtrl</span><span class="p">(</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="p">,</span> 
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">style</span><span class="p">)</span>
    <span class="n">textctrl</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
    <span class="n">textctrl</span><span class="o">.</span><span class="n">SetDefaultStyle</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">TextAttr</span><span class="p">(</span><span class="n">font</span> <span class="o">=</span> <span class="n">font</span><span class="p">,</span> <span class="n">colText</span> <span class="o">=</span> <span class="n">fontcolor</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">textctrl</span></div>


<div class="viewcode-block" id="createwxButton"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.createwxButton">[docs]</a><span class="k">def</span> <span class="nf">createwxButton</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span>
        <span class="n">fontname</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">,</span> 
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">DefaultSize</span><span class="p">):</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings_GetFont</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetWeight</span><span class="p">(</span><span class="n">fontweight</span><span class="p">)</span>
    <span class="n">btn</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="p">,</span> 
            <span class="n">label</span> <span class="o">=</span> <span class="n">label</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">)</span>
    <span class="n">btn</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
    <span class="n">btn</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="n">fontcolor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">btn</span></div>


<div class="viewcode-block" id="createwxPanel"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.createwxPanel">[docs]</a><span class="k">def</span> <span class="nf">createwxPanel</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">backgroundcolor</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">backgroundcolor</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">backgroundcolor</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_COLOUR_BTNFACE</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>
    <span class="n">panel</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Panel</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">)</span>
    <span class="n">panel</span><span class="o">.</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">backgroundcolor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">panel</span></div>


<div class="viewcode-block" id="createwxStaticBox"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.createwxStaticBox">[docs]</a><span class="k">def</span> <span class="nf">createwxStaticBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ALIGN_LEFT</span><span class="p">,</span>
                      <span class="n">fontname</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_DEFAULT_GUI_FONT</span><span class="p">,</span> 
                      <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                      <span class="n">fontweight</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">FONTWEIGHT_NORMAL</span><span class="p">,</span>
                      <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">):</span>
    <span class="n">font</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings_GetFont</span><span class="p">(</span><span class="n">fontname</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetPointSize</span><span class="p">(</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="n">font</span><span class="o">.</span><span class="n">SetWeight</span><span class="p">(</span><span class="n">fontweight</span><span class="p">)</span>
    <span class="n">sbox</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">StaticBox</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">)</span>
    <span class="n">sbox</span><span class="o">.</span><span class="n">SetFont</span><span class="p">(</span><span class="n">font</span><span class="p">)</span>
    <span class="n">sbox</span><span class="o">.</span><span class="n">SetForegroundColour</span><span class="p">(</span><span class="n">fontcolor</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sbox</span></div>


<div class="viewcode-block" id="aupmu"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.aupmu">[docs]</a><span class="k">def</span> <span class="nf">aupmu</span><span class="p">(</span><span class="n">gap</span><span class="p">,</span> <span class="n">xlamd</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="mf">3.44</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.00</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="mf">1.54</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    gap, xlamd: [mm]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bfield</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">b</span><span class="o">*</span><span class="p">(</span><span class="n">gap</span><span class="o">/</span><span class="n">xlamd</span><span class="p">)</span><span class="o">+</span><span class="n">c</span><span class="o">*</span><span class="p">(</span><span class="n">gap</span><span class="o">/</span><span class="n">xlamd</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">au</span> <span class="o">=</span> <span class="mf">0.934</span><span class="o">*</span><span class="p">(</span><span class="n">xlamd</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span><span class="o">*</span><span class="n">bfield</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">au</span></div>


<div class="viewcode-block" id="r56chi"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.r56chi">[docs]</a><span class="k">def</span> <span class="nf">r56chi</span><span class="p">(</span><span class="n">gam0</span><span class="p">,</span> <span class="n">ibfield</span><span class="p">,</span> <span class="n">imagl</span> <span class="o">=</span> <span class="mf">0.150</span><span class="p">,</span> <span class="n">idril</span> <span class="o">=</span> <span class="mf">0.285</span><span class="p">,):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return r56 of chicane, ibfield: [T]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">c0</span> <span class="o">=</span> <span class="mf">299792458.0</span>
    <span class="n">m0</span> <span class="o">=</span> <span class="mf">9.10938188e-31</span>
    <span class="n">e0</span> <span class="o">=</span> <span class="mf">1.60218e-19</span>
    <span class="n">r56</span> <span class="o">=</span> <span class="p">(</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">3.0</span><span class="o">*</span><span class="n">imagl</span> <span class="o">+</span> <span class="n">idril</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">(</span><span class="n">imagl</span><span class="o">*</span><span class="n">e0</span><span class="o">*</span><span class="n">ibfield</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">gam0</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">m0</span><span class="o">/</span><span class="n">c0</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">return</span> <span class="n">r56</span></div>


<div class="viewcode-block" id="readfld"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.readfld">[docs]</a><span class="k">def</span> <span class="nf">readfld</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">ncar</span> <span class="o">=</span> <span class="mi">121</span><span class="p">):</span>
    <span class="n">fid</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="s1">&#39;double&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ncar</span><span class="o">*</span><span class="n">ncar</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">realp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">imagp</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">intp</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">realp</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">imagp</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">efield</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">complex</span><span class="p">(</span><span class="n">realp</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">imagp</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">realp</span><span class="o">.</span><span class="n">size</span><span class="p">)])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">ncar</span><span class="p">,</span> <span class="n">ncar</span><span class="p">)</span>
    <span class="n">wexy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fftshift</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft2</span><span class="p">(</span><span class="n">efield</span><span class="p">))</span>
    <span class="n">farfield</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">wexy</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">return</span> <span class="n">intp</span><span class="p">,</span> <span class="n">farfield</span></div>


<div class="viewcode-block" id="getResPath"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.getResPath">[docs]</a><span class="k">def</span> <span class="nf">getResPath</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">cwd</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="n">resdir</span> <span class="o">=</span> <span class="s1">&#39;../resources&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return absolute path for resources, e.g. images, data</span>
<span class="sd">    :param reshead : the relative path for resources dir</span>
<span class="sd">    :param filename: filename for images or data</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">resRoot</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">cwd</span><span class="p">),</span> <span class="n">resdir</span><span class="p">)</span>
    <span class="n">resPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">resRoot</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">resPath</span></div>
    

<div class="viewcode-block" id="importCheck"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.importCheck">[docs]</a><span class="k">def</span> <span class="nf">importCheck</span><span class="p">(</span><span class="n">moduleName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    check could import moduleName or not</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#return map(__import__, moduleName)</span>
        <span class="k">return</span> <span class="nb">__import__</span><span class="p">(</span><span class="n">moduleName</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="n">dial</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">MessageDialog</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">message</span> <span class="o">=</span> <span class="s2">u&quot;Cannot import module named&quot;</span> <span class="o">+</span> <span class="s2">u&quot; &#39;&quot;</span> 
                          <span class="o">+</span> <span class="n">moduleName</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">u&quot;&#39;, please try again!&quot;</span><span class="p">,</span>
                <span class="n">caption</span> <span class="o">=</span> <span class="s2">u&quot;Module import error&quot;</span><span class="p">,</span>
                <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">OK</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">CANCEL</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ICON_ERROR</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">CENTRE</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span></div>


<div class="viewcode-block" id="hex2rgb"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.hex2rgb">[docs]</a><span class="k">def</span> <span class="nf">hex2rgb</span><span class="p">(</span><span class="n">hex_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert hexadecimal color into rgb form.</span>
<span class="sd">    :param hex_string: hex color string, e.g. white color: &#39;#FFFFFF&#39;</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>
<span class="sd">    &gt;&gt;&gt; hex2rgb(&#39;#FFAABB&#39;)</span>
<span class="sd">    (255, 170, 187)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rgb</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">hex2color</span><span class="p">(</span><span class="n">hex_string</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="mi">255</span><span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rgb</span><span class="p">])</span></div>


<div class="viewcode-block" id="rgb2hex"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.rgb2hex">[docs]</a><span class="k">def</span> <span class="nf">rgb2hex</span><span class="p">(</span><span class="n">rgb_tuple</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert color rgb into hex form.</span>
<span class="sd">    :param rgb_tuple: tuple of rgb color, e.g. white color: (255, 255, 255)</span>
<span class="sd">    </span>
<span class="sd">    Example:</span>
<span class="sd">    &gt;&gt;&gt; rgb2hex((255, 170, 187))</span>
<span class="sd">    u&#39;ffaabb&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">colors</span><span class="o">.</span><span class="n">rgb2hex</span><span class="p">([</span><span class="mf">1.0</span><span class="o">*</span><span class="n">x</span><span class="o">/</span><span class="mi">255</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rgb_tuple</span><span class="p">])</span></div>


<div class="viewcode-block" id="setPath"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.setPath">[docs]</a><span class="k">def</span> <span class="nf">setPath</span><span class="p">(</span><span class="n">pathstr</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pathstr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)))</span></div>


<div class="viewcode-block" id="getFileToLoad"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.getFileToLoad">[docs]</a><span class="k">def</span> <span class="nf">getFileToLoad</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="s1">&#39;single&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">exts</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files (*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ext</span><span class="p">]</span>
            <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exts</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files &#39;</span> <span class="o">+</span> <span class="s1">&#39;(*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files &#39;</span> <span class="o">+</span> <span class="s1">&#39;(*.&#39;</span> <span class="o">+</span> <span class="n">ext</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">ext</span>

    <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;single&#39;</span><span class="p">:</span>
        <span class="n">dial</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Please select file&quot;</span><span class="p">,</span>
                <span class="n">defaultDir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">defaultFile</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">wildcard</span> <span class="o">=</span> <span class="n">wildcardpattern</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_DEFAULT_STYLE</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_FILE_MUST_EXIST</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">fullfilename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">GetDirectory</span><span class="p">(),</span> <span class="n">dial</span><span class="o">.</span><span class="n">GetFilename</span><span class="p">())</span>
            <span class="k">return</span> <span class="n">fullfilename</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">else</span><span class="p">:</span> <span class="c1">#flag = &#39;multi&#39;:</span>
        <span class="n">dial</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Please select file&quot;</span><span class="p">,</span>
                <span class="n">defaultDir</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">defaultFile</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">wildcard</span> <span class="o">=</span> <span class="n">wildcardpattern</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_DEFAULT_STYLE</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_FILE_MUST_EXIST</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_MULTIPLE</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
            <span class="n">fullfilenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dial</span><span class="o">.</span><span class="n">GetDirectory</span><span class="p">(),</span> <span class="n">filename</span><span class="p">)</span> <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">dial</span><span class="o">.</span><span class="n">GetFilenames</span><span class="p">()]</span>
            <span class="k">return</span> <span class="n">fullfilenames</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
    
    <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span></div>


<div class="viewcode-block" id="getFileToSave"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.getFileToSave">[docs]</a><span class="k">def</span> <span class="nf">getFileToSave</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ext</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">exts</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files (*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">ext</span><span class="p">]</span>
            <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="s1">&#39;|&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">exts</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">ext</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files &#39;</span> <span class="o">+</span> <span class="s1">&#39;(*.&#39;</span> <span class="o">+</span> <span class="n">x</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">x</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">wildcardpattern</span> <span class="o">=</span> <span class="n">ext</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; files &#39;</span> <span class="o">+</span> <span class="s1">&#39;(*.&#39;</span> <span class="o">+</span> <span class="n">ext</span> <span class="o">+</span> <span class="s1">&#39;)|*.&#39;</span> <span class="o">+</span> <span class="n">ext</span>
    <span class="n">dial</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FileDialog</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;Save it as&quot;</span><span class="p">,</span> <span class="n">wildcard</span> <span class="o">=</span> <span class="n">wildcardpattern</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_SAVE</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">FD_OVERWRITE_PROMPT</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">dial</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
        <span class="n">savetofilename</span> <span class="o">=</span> <span class="n">dial</span><span class="o">.</span><span class="n">GetPath</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">savetofilename</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">dial</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span></div>
    

<div class="viewcode-block" id="SaveData"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.SaveData">[docs]</a><span class="k">class</span> <span class="nc">SaveData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="s1">&#39;imageviewer&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        type: asc, hdf5, sdds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span>  <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">onDataProcess</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">type</span> <span class="o">==</span> <span class="s2">&quot;.asc&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onSaveASC</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;.hdf5&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onSaveHDF5</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">type</span> <span class="o">==</span> <span class="s1">&#39;.sdds&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">onSaveSDDS</span><span class="p">()</span>

<div class="viewcode-block" id="SaveData.onDataProcess"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.SaveData.onDataProcess">[docs]</a>    <span class="k">def</span> <span class="nf">onDataProcess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">idx</span><span class="p">,</span> <span class="n">idy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">xx</span> <span class="o">==</span> <span class="n">xx</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">yy</span> <span class="o">==</span> <span class="n">yy</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xpos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ypos</span> <span class="o">=</span> <span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">idy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sumint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span></div>

<div class="viewcode-block" id="SaveData.onSaveASC"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.SaveData.onSaveASC">[docs]</a>    <span class="k">def</span> <span class="nf">onSaveASC</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">np</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%.16e</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39; &#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SaveData.onSaveHDF5"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.SaveData.onSaveHDF5">[docs]</a>    <span class="k">def</span> <span class="nf">onSaveHDF5</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">rg</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
        <span class="n">rg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %Z&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
        <span class="n">rg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;app&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">app</span>

        <span class="n">dset</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;image/data&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="n">dset</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">dset</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;xypos&#39;</span><span class="p">]</span>  <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xpos</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ypos</span><span class="p">)</span>
        <span class="n">dset</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;sumint&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sumint</span>
        <span class="n">dset</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;maxint&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxint</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="SaveData.onSaveSDDS"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.SaveData.onSaveSDDS">[docs]</a>    <span class="k">def</span> <span class="nf">onSaveSDDS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span> <span class="s1">&#39;save sdds format to be implemented.&#39;</span></div></div>
        

<div class="viewcode-block" id="ExportData"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ExportData">[docs]</a><span class="k">class</span> <span class="nc">ExportData</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_raw</span><span class="p">,</span> <span class="n">data_fit</span><span class="p">,</span> <span class="n">model_x</span><span class="p">,</span> <span class="n">model_y</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">data_raw</span> <span class="o">=</span> <span class="n">data_raw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_fit</span> <span class="o">=</span> <span class="n">data_fit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_x</span> <span class="o">=</span> <span class="n">model_x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model_y</span> <span class="o">=</span> <span class="n">model_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onProcess</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">onSave</span><span class="p">()</span>

<div class="viewcode-block" id="ExportData.onProcess"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ExportData.onProcess">[docs]</a>    <span class="k">def</span> <span class="nf">onProcess</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># fit:</span>
        <span class="n">res_x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_x</span><span class="o">.</span><span class="n">get_fit_result</span><span class="p">()</span>
        <span class="n">res_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_x</span><span class="o">.</span><span class="n">get_fit_result</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x0</span> <span class="o">=</span> <span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y0</span> <span class="o">=</span> <span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sx</span> <span class="o">=</span> <span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sy</span> <span class="o">=</span> <span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span></div>

<div class="viewcode-block" id="ExportData.onSave"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ExportData.onSave">[docs]</a>    <span class="k">def</span> <span class="nf">onSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="n">rg</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
        <span class="n">rg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;timestamp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %Z&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_raw</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">dset</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;data/raw/&#39;</span> <span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">dset</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>


        <span class="n">dg</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="s1">&#39;data/fit&#39;</span><span class="p">)</span>
        <span class="n">dg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x0</span>
        <span class="n">dg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">y0</span>
        <span class="n">dg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sx</span>
        <span class="n">dg</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;ystd&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sy</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_fit</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">dset</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">create_dataset</span><span class="p">(</span><span class="s1">&#39;data/fit/&#39;</span> <span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">v</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="n">compression</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="n">dset</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div></div>

<div class="viewcode-block" id="FloatSlider"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider">[docs]</a><span class="k">class</span> <span class="nc">FloatSlider</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Slider</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="nb">id</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_ANY</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">minValue</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">maxValue</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">increment</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> 
                 <span class="n">size</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">DefaultSize</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SL_HORIZONTAL</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="n">minValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="n">maxValue</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inc</span> <span class="o">=</span> <span class="n">increment</span>
        <span class="n">ival</span><span class="p">,</span> <span class="n">imin</span><span class="p">,</span> <span class="n">imax</span> <span class="o">=</span> <span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="n">v</span><span class="o">/</span><span class="n">increment</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">minValue</span><span class="p">,</span> <span class="n">maxValue</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">FloatSlider</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">ival</span><span class="p">,</span> <span class="n">minValue</span> <span class="o">=</span> <span class="n">imin</span><span class="p">,</span> <span class="n">maxValue</span> <span class="o">=</span> <span class="n">imax</span><span class="p">,</span> <span class="nb">id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">,</span> <span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">,</span> <span class="n">style</span> <span class="o">=</span> <span class="n">style</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_SCROLL</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_OnScroll</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_OnScroll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">ival</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">GetValue</span><span class="p">()</span>
        <span class="n">imin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">GetMin</span><span class="p">()</span>
        <span class="n">imax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">GetMax</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ival</span> <span class="o">==</span> <span class="n">imin</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min</span>
        <span class="k">elif</span> <span class="n">ival</span> <span class="o">==</span> <span class="n">imax</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">ival</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inc</span>
        <span class="n">event</span><span class="o">.</span><span class="n">Skip</span><span class="p">()</span>

<div class="viewcode-block" id="FloatSlider.GetValue"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.GetValue">[docs]</a>    <span class="k">def</span> <span class="nf">GetValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_value</span></div>

<div class="viewcode-block" id="FloatSlider.GetMin"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.GetMin">[docs]</a>    <span class="k">def</span> <span class="nf">GetMin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min</span></div>

<div class="viewcode-block" id="FloatSlider.GetMax"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.GetMax">[docs]</a>    <span class="k">def</span> <span class="nf">GetMax</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max</span></div>

<div class="viewcode-block" id="FloatSlider.GetInc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.GetInc">[docs]</a>    <span class="k">def</span> <span class="nf">GetInc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inc</span></div>

<div class="viewcode-block" id="FloatSlider.GetRange"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.GetRange">[docs]</a>    <span class="k">def</span> <span class="nf">GetRange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_max</span></div>

<div class="viewcode-block" id="FloatSlider.SetValue"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.SetValue">[docs]</a>    <span class="k">def</span> <span class="nf">SetValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">value</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_value</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="FloatSlider.SetMin"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.SetMin">[docs]</a>    <span class="k">def</span> <span class="nf">SetMin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetMin</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">minval</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="n">minval</span></div>

<div class="viewcode-block" id="FloatSlider.SetMax"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.SetMax">[docs]</a>    <span class="k">def</span> <span class="nf">SetMax</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetMax</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">maxval</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="n">maxval</span></div>

<div class="viewcode-block" id="FloatSlider.SetInc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.SetInc">[docs]</a>    <span class="k">def</span> <span class="nf">SetInc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inc</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetRange</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_min</span><span class="o">/</span><span class="n">inc</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_max</span><span class="o">/</span><span class="n">inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetValue</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_value</span><span class="o">/</span><span class="n">inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_inc</span> <span class="o">=</span> <span class="n">inc</span></div>

<div class="viewcode-block" id="FloatSlider.SetRange"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FloatSlider.SetRange">[docs]</a>    <span class="k">def</span> <span class="nf">SetRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minval</span><span class="p">,</span> <span class="n">maxval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_islider</span><span class="o">.</span><span class="n">SetRange</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">minval</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_inc</span><span class="p">),</span> <span class="nb">round</span><span class="p">(</span><span class="n">maxval</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_inc</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_min</span> <span class="o">=</span> <span class="n">minval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_max</span> <span class="o">=</span> <span class="n">maxval</span></div></div>


<div class="viewcode-block" id="func_sinc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.func_sinc">[docs]</a><span class="k">def</span> <span class="nf">func_sinc</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">r</span><span class="p">)</span><span class="o">/</span><span class="n">r</span></div>


<div class="viewcode-block" id="func_peaks"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.func_peaks">[docs]</a><span class="k">def</span> <span class="nf">func_peaks</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">10</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mi">5</span> <span class="o">-</span> <span class="n">x</span><span class="o">**</span><span class="mi">3</span> <span class="o">-</span> <span class="n">y</span><span class="o">**</span><span class="mi">5</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">/</span><span class="mi">3</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span></div>


<div class="viewcode-block" id="ImageDataFactor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ImageDataFactor">[docs]</a><span class="k">class</span> <span class="nc">ImageDataFactor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="c1"># will write into C module, 2015-06-16</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgdata</span> <span class="o">=</span> <span class="n">z</span>

<div class="viewcode-block" id="ImageDataFactor.setData"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ImageDataFactor.setData">[docs]</a>    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgdata</span> <span class="o">=</span> <span class="n">z</span></div>

<div class="viewcode-block" id="ImageDataFactor.getData"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ImageDataFactor.getData">[docs]</a>    <span class="k">def</span> <span class="nf">getData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">imgdata</span></div>

<div class="viewcode-block" id="ImageDataFactor.getInt"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ImageDataFactor.getInt">[docs]</a>    <span class="k">def</span> <span class="nf">getInt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imgdata</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="ScanDataFactor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor">[docs]</a><span class="k">class</span> <span class="nc">ScanDataFactor</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="c1"># will write into C module, 2015-06-17</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">scannum</span><span class="p">,</span> <span class="n">shotnum</span><span class="p">,</span> <span class="n">ndim</span> <span class="o">=</span> <span class="mi">2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scanshape</span> <span class="o">=</span> <span class="p">[</span><span class="n">scannum</span><span class="p">,</span> <span class="n">shotnum</span><span class="p">,</span> <span class="n">ndim</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scandata</span> <span class="o">=</span> <span class="n">z</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scanshape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scanmean</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scandata</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="ScanDataFactor.show"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.show">[docs]</a>    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scandata</span><span class="p">[</span><span class="n">i</span><span class="p">,:,:][:,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scanshape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span></div>

<div class="viewcode-block" id="ScanDataFactor.setData"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.setData">[docs]</a>    <span class="k">def</span> <span class="nf">setData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scandata</span> <span class="o">=</span> <span class="n">z</span></div>

<div class="viewcode-block" id="ScanDataFactor.getXerrbar"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.getXerrbar">[docs]</a>    <span class="k">def</span> <span class="nf">getXerrbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xerr</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scandata</span><span class="p">[</span><span class="n">i</span><span class="p">,:,:][:,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scanshape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xerr</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScanDataFactor.getYerrbar"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.getYerrbar">[docs]</a>    <span class="k">def</span> <span class="nf">getYerrbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yerr</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">scandata</span><span class="p">[</span><span class="n">i</span><span class="p">,:,:][:,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">scanshape</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">yerr</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScanDataFactor.getXavg"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.getXavg">[docs]</a>    <span class="k">def</span> <span class="nf">getXavg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scanmean</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="ScanDataFactor.getYavg"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanDataFactor.getYavg">[docs]</a>    <span class="k">def</span> <span class="nf">getYavg</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">scanmean</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span></div></div>


<div class="viewcode-block" id="ProgressBarFrame"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ProgressBarFrame">[docs]</a><span class="k">class</span> <span class="nc">ProgressBarFrame</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="nb">range</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span> <span class="p">:</span>
        <span class="n">wx</span><span class="o">.</span><span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createProgressbar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SetMinSize</span><span class="p">((</span><span class="mi">400</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Centre</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Show</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_timer</span><span class="o">.</span><span class="n">Start</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>

<div class="viewcode-block" id="ProgressBarFrame.createProgressbar"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ProgressBarFrame.createProgressbar">[docs]</a>    <span class="k">def</span> <span class="nf">createProgressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Gauge</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="o">.</span><span class="n">SetRange</span><span class="p">(</span><span class="nb">range</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">range</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_st</span>  <span class="o">=</span> <span class="n">createwxStaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Elapsed Time:&#39;</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_val</span> <span class="o">=</span> <span class="n">createwxStaticText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;00:00:00&#39;</span><span class="p">,</span>      <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">fontcolor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">)</span>

        <span class="n">vbox_main</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">VERTICAL</span><span class="p">)</span>
        <span class="n">hbox_time</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">BoxSizer</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">HORIZONTAL</span><span class="p">)</span>
        <span class="n">hbox_time</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_st</span><span class="p">,</span>  <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALIGN_LEFT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">hbox_time</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_val</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALIGN_LEFT</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">vbox_main</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pb</span><span class="p">,</span>   <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">vbox_main</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">hbox_time</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wx</span><span class="o">.</span><span class="n">EXPAND</span> <span class="o">|</span> <span class="n">wx</span><span class="o">.</span><span class="n">ALL</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">SetSizerAndFit</span><span class="p">(</span><span class="n">vbox_main</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_timer</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Timer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">EVT_TIMER</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">onTickTimer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_timer</span><span class="p">)</span></div>
    
<div class="viewcode-block" id="ProgressBarFrame.onTickTimer"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ProgressBarFrame.onTickTimer">[docs]</a>    <span class="k">def</span> <span class="nf">onTickTimer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">fmt</span><span class="o">=</span><span class="s1">&#39;%H:%M:%S&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">elapsed_time_val</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">fmt</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">gmtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">t0</span><span class="p">)))</span></div></div>


<div class="viewcode-block" id="handleConfig"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.handleConfig">[docs]</a><span class="k">def</span> <span class="nf">handleConfig</span><span class="p">(</span><span class="n">config_name</span><span class="o">=</span><span class="s1">&#39;imageviewer.xml&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle configuration files issues:</span>
<span class="sd">        1 load configuration files from app data</span>
<span class="sd">        2 create user specific configuration files</span>
<span class="sd">    :param config_name: configuration file name, by default is &#39;imageviewer.xml&#39; (for app Image Viewer)</span>
<span class="sd">    reutrn valid configuration file at default user location</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">default_location</span>    <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s2">&quot;~/.felapps/config/&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">default_location</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;mkdir -p &#39;</span> <span class="o">+</span> <span class="n">default_location</span><span class="p">)</span>
    <span class="n">default_configfile</span>  <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">default_location</span><span class="p">,</span> <span class="n">config_name</span><span class="p">)</span>
    <span class="n">optional_configfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">prefix</span><span class="p">,</span> <span class="s1">&#39;local/share/felapps/&#39;</span><span class="p">,</span> <span class="n">config_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">default_configfile</span><span class="p">):</span>  <span class="c1"># configuration file is found at default location</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">default_configfile</span>
    <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">optional_configfile</span><span class="p">):</span>  <span class="c1"># load from system location, copy to default user location</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">optional_configfile</span><span class="p">,</span> <span class="n">default_configfile</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">default_configfile</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># pop window to let user select config file and copy to default user location</span>
        <span class="n">config_selected</span> <span class="o">=</span> <span class="n">getFileToLoad</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="s1">&#39;xml&#39;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">config_selected</span><span class="p">,</span> <span class="n">default_configfile</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">default_configfile</span>

    <span class="k">return</span> <span class="n">retval</span></div>
 

<div class="viewcode-block" id="FitModels"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels">[docs]</a><span class="k">class</span> <span class="nc">FitModels</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fitting models: &#39;gaussuan&#39;  : a * exp(-(x-x0)^2/2/xstd^2) + y0</span>
<span class="sd">                        &#39;polynomial&#39;: \Sigma_i=0^n x^i * a_i</span>
<span class="sd">                        &#39;power&#39;     : a * x ^ b</span>
<span class="sd">                        &#39;sin&#39;       : a * sin(b * x + c) + d</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">lmfit</span><span class="o">.</span><span class="n">Parameters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>  <span class="o">=</span> <span class="n">model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span> <span class="o">=</span> <span class="n">params</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">kws</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">kws</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">kws</span><span class="p">[</span><span class="s1">&#39;n&#39;</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># when model is polynomial, highest order</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># range(n + 1): [0, n]</span>

        <span class="c1"># data fitting window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_min</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_max</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmin&#39;</span><span class="p">),</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmax&#39;</span><span class="p">)</span>

        <span class="c1"># fitting method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">=</span> <span class="s1">&#39;leastsq&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_set_params_func</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;gaussian&#39;</span>  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_params_gaussian</span><span class="p">,</span>
                <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_set_params_polynomial</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fitfunc</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;gaussian&#39;</span>  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_gaussian</span><span class="p">,</span>
                <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_polynomial</span><span class="p">,</span>
                <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_gen_func_text</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;gaussian&#39;</span>  <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_func_text_gaussian</span><span class="p">,</span>
                <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_func_text_polynomial</span><span class="p">,</span>
                <span class="p">}</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span> <span class="o">=</span> <span class="kc">None</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>

    <span class="nd">@model</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">mode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">model</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span>
    
    <span class="nd">@method</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_method</span> <span class="o">=</span> <span class="n">method</span>

    <span class="k">def</span> <span class="nf">_fit_gaussian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">x0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">y0</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">xstd</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">2.0</span><span class="o">/</span><span class="n">xstd</span><span class="o">/</span><span class="n">xstd</span><span class="p">)</span> <span class="o">+</span> <span class="n">y0</span>
    
    <span class="k">def</span> <span class="nf">_fit_polynomial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
            <span class="n">f</span> <span class="o">+=</span> <span class="n">p</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">value</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="n">i</span>
        <span class="k">return</span> <span class="n">f</span>

    <span class="k">def</span> <span class="nf">_errfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">y</span>

<div class="viewcode-block" id="FitModels.set_data"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.set_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set raw data to fit</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span> <span class="o">=</span> <span class="n">x</span>
            <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span> <span class="o">=</span> <span class="n">y</span></div>

<div class="viewcode-block" id="FitModels.get_data"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return raw data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span></div>
            
    <span class="k">def</span> <span class="nf">_set_fitfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; type: gaussian, linear, quadratic, polynomial, power, sin</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="nb">type</span>

    <span class="k">def</span> <span class="nf">_gen_func_text_gaussian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">p0</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">x0</span> <span class="o">=</span> <span class="n">p0</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">y0</span> <span class="o">=</span> <span class="n">p0</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">xstd</span> <span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">retfun</span> <span class="o">=</span> <span class="s1">&#39;$f(x) = a e^{-</span><span class="se">\\</span><span class="s1">frac{(x-x_0)^2}{2\sigma_x^2}}+y_0$&#39;</span>
        <span class="n">retcoe</span> <span class="o">=</span> <span class="s1">&#39;$a = </span><span class="si">%.3f</span><span class="s1">, x_0 = </span><span class="si">%.3f</span><span class="s1">, \sigma_x = </span><span class="si">%.3f</span><span class="s1">, y_0 = </span><span class="si">%.3f</span><span class="s1">$&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">xstd</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="n">retfun</span><span class="p">,</span> <span class="s1">&#39;fcoef&#39;</span><span class="p">:</span> <span class="n">retcoe</span><span class="p">}</span>
    
    <span class="k">def</span> <span class="nf">_gen_func_text_polynomial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">):</span>
        <span class="n">retfun</span> <span class="o">=</span> <span class="s1">&#39;$f(x) = \sum_{i=0}^{</span><span class="si">%s</span><span class="s1">}\,a_i x^i$&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
        <span class="n">retcoe</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;$a_{</span><span class="si">%d</span><span class="s1">} = </span><span class="si">%.3f</span><span class="s1">$&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">p0</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)])</span>
        <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="n">retfun</span><span class="p">,</span> <span class="s1">&#39;fcoef&#39;</span><span class="p">:</span> <span class="n">retcoe</span><span class="p">}</span>

<div class="viewcode-block" id="FitModels.set_params"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.set_params">[docs]</a>    <span class="k">def</span> <span class="nf">set_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">p0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;p0: initial parameters dict&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_set_params_func</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">](</span><span class="n">p0</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_set_params_gaussian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">,</span>    <span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span>   <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span>   <span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span>  <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;y0&#39;</span><span class="p">,</span>   <span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span>  <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;xstd&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">_set_params_polynomial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
            <span class="n">pi_name</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_params</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pi_name</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">p0</span><span class="p">[</span><span class="n">pi_name</span><span class="p">])</span>

<div class="viewcode-block" id="FitModels.get_fitfunc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.get_fitfunc">[docs]</a>    <span class="k">def</span> <span class="nf">get_fitfunc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p0</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">p0</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span><span class="o">.</span><span class="n">params</span>
        <span class="n">f_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fitfunc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">]</span>
        <span class="n">gen_func</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_gen_func_text</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">]</span>
        <span class="n">f_text</span> <span class="o">=</span> <span class="n">gen_func</span><span class="p">(</span><span class="n">p0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">f_func</span><span class="p">,</span> <span class="n">f_text</span></div>

<div class="viewcode-block" id="FitModels.get_fit_result"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.get_fit_result">[docs]</a>    <span class="k">def</span> <span class="nf">get_fit_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span></div>

<div class="viewcode-block" id="FitModels.fit"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.fit">[docs]</a>    <span class="k">def</span> <span class="nf">fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_params</span>
        <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fitfunc</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="p">]</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>

        <span class="n">xmin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_min</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_max</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">x_fit_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        
        <span class="n">x_fit</span><span class="p">,</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">get_range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">)</span>
        <span class="n">y_fit</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>

        <span class="n">m</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_method</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">lmfit</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_errfunc</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">m</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x_fit</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span> <span class="o">=</span> <span class="n">res</span>
        <span class="k">return</span> <span class="n">res</span></div>
    
<div class="viewcode-block" id="FitModels.fit_report"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.fit_report">[docs]</a>    <span class="k">def</span> <span class="nf">fit_report</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># gaussian model</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="s1">&#39;gaussian&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span><span class="o">.</span><span class="n">params</span>
                <span class="n">retstr1</span> <span class="o">=</span> <span class="s2">&quot;Fitting Function:&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">retstr2</span> <span class="o">=</span> <span class="s2">&quot;a*exp(-(x-x0)^2/2/sx^2)+y0&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">retstr3</span> <span class="o">=</span> <span class="s2">&quot;Fitting Output:&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">retstr4</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{a0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{a0_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a0_k</span><span class="o">=</span><span class="s1">&#39;a&#39;</span> <span class="p">,</span> <span class="n">a0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">retstr5</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{x0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{x0_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x0_k</span><span class="o">=</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="n">x0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">retstr6</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{sx_k:&lt;3s}</span><span class="s2">: </span><span class="si">{sx_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sx_k</span><span class="o">=</span><span class="s1">&#39;sx&#39;</span><span class="p">,</span> <span class="n">sx_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">retstr7</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{y0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{y0_v:&gt;10.4f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y0_k</span><span class="o">=</span><span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">y0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">retstr1</span> <span class="o">+</span> <span class="n">retstr2</span> <span class="o">+</span> <span class="n">retstr3</span> <span class="o">+</span> <span class="n">retstr4</span> <span class="o">+</span> <span class="n">retstr5</span> <span class="o">+</span> <span class="n">retstr6</span> <span class="o">+</span> <span class="n">retstr7</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;Nothing to report.&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fit_result</span><span class="o">.</span><span class="n">params</span>
                <span class="n">retstr</span>  <span class="o">=</span> <span class="s2">&quot;Fitting Function:&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">fstr</span> <span class="o">=</span> <span class="s1">&#39;+&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;a&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;*x^&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)])</span>
                <span class="n">fstr</span> <span class="o">=</span> <span class="n">fstr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;*x^0&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="n">fstr</span> <span class="o">=</span> <span class="n">fstr</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;x^1&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)</span>
                <span class="n">retstr</span> <span class="o">+=</span> <span class="n">fstr</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="n">retstr</span> <span class="o">+=</span> <span class="s2">&quot;Fitting Output:&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">):</span>
                    <span class="n">ki</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                    <span class="n">retstr</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{k:&lt;3s}</span><span class="s2">: </span><span class="si">{v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="n">ki</span><span class="p">,</span> <span class="n">v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="n">ki</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">retstr</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="s2">&quot;Nothing to report.&quot;</span></div>

<div class="viewcode-block" id="FitModels.calc_p0"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.FitModels.calc_p0">[docs]</a>    <span class="k">def</span> <span class="nf">calc_p0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return p0 from input x, y</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="s1">&#39;gaussian&#39;</span><span class="p">:</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">xdata</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_y</span>
            <span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="n">xdata</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span>   <span class="p">:</span> <span class="n">xdata</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
                  <span class="s1">&#39;x0&#39;</span>  <span class="p">:</span> <span class="n">x0</span><span class="p">,</span>
                  <span class="s1">&#39;xstd&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">x</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="n">xdata</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xdata</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span>
                  <span class="s1">&#39;y0&#39;</span>  <span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                  <span class="p">}</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="s1">&#39;polynomial&#39;</span><span class="p">:</span>
            <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)}</span>
        <span class="k">return</span> <span class="n">p0</span></div></div>


<div class="viewcode-block" id="get_randstr"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.get_randstr">[docs]</a><span class="k">def</span> <span class="nf">get_randstr</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; return string of random picked up chars</span>
<span class="sd">    :param length: string length to return</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">chars</span> <span class="o">=</span> <span class="s1">&#39;ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz&#39;</span>
    <span class="n">retval</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">chars</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">)])</span>
    <span class="k">return</span> <span class="n">retval</span></div>


<div class="viewcode-block" id="get_file_info"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.get_file_info">[docs]</a><span class="k">def</span> <span class="nf">get_file_info</span><span class="p">(</span><span class="n">filepath</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; return file information</span>
<span class="sd">    :param filepath: file full path name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f_info</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
    <span class="n">f_ctime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">,</span>
                            <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">f_info</span><span class="o">.</span><span class="n">st_ctime</span><span class="p">))</span>
    <span class="n">f_size_bytes</span> <span class="o">=</span> <span class="n">f_info</span><span class="o">.</span><span class="n">st_size</span>
    <span class="n">f_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span>  <span class="p">:</span> <span class="n">f_name</span><span class="p">,</span>
            <span class="s1">&#39;ctime&#39;</span> <span class="p">:</span> <span class="n">f_ctime</span><span class="p">,</span>
            <span class="s1">&#39;bytes&#39;</span> <span class="p">:</span> <span class="n">f_size_bytes</span><span class="p">}</span></div>


<div class="viewcode-block" id="gaussian_fit"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.gaussian_fit">[docs]</a><span class="k">def</span> <span class="nf">gaussian_fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; return fit result and fitmodels</span>
<span class="sd">        :param x: data to fit, x col, numpy array</span>
<span class="sd">        :param xdata: data to fit, y col, numpy array</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fm</span> <span class="o">=</span> <span class="n">FitModels</span><span class="p">()</span>
    <span class="n">x0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">xdata</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xdata</span><span class="p">)</span>
    <span class="n">p0</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span>   <span class="p">:</span> <span class="n">xdata</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span>
          <span class="s1">&#39;x0&#39;</span>  <span class="p">:</span> <span class="n">x0</span><span class="p">,</span>
          <span class="s1">&#39;xstd&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">((</span><span class="n">x</span><span class="o">-</span><span class="n">x0</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="n">xdata</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">xdata</span><span class="p">))</span><span class="o">**</span><span class="mf">0.5</span><span class="p">,</span>
          <span class="s1">&#39;y0&#39;</span>  <span class="p">:</span> <span class="mi">0</span>
         <span class="p">}</span>
    <span class="n">fm</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">xdata</span><span class="p">)</span>
    <span class="n">fm</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">p0</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">fm</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;full&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">res</span><span class="p">,</span> <span class="n">fm</span>
    <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s1">&#39;simple&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">res</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">value</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="s1">&#39;xstd&#39;</span><span class="p">)]</span></div>


<div class="viewcode-block" id="AnalysisPlotPanel"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel">[docs]</a><span class="k">class</span> <span class="nc">AnalysisPlotPanel</span><span class="p">(</span><span class="n">uiutils</span><span class="o">.</span><span class="n">MyPlotPanel</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; data: m x n image array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
            <span class="n">xx</span><span class="p">,</span> <span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">func_sinc</span><span class="p">(</span><span class="n">xx</span><span class="p">,</span> <span class="n">yy</span><span class="p">)</span>
            <span class="c1">#data = np.zeros([50, 50])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="s1">&#39;jet&#39;</span>

        <span class="c1"># axis directions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_direction</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># left-&gt;right: small-&gt;big</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_direction</span> <span class="o">=</span> <span class="kc">True</span> <span class="c1"># bottom-&gt;up : small-&gt;big</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">165</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mec</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mfc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>

        <span class="c1"># pos markers M1 and M2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mkc1</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mkc2</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span> <span class="mi">230</span><span class="p">,</span> <span class="mi">140</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pcc</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">Colour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">GetAsString</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">C2S_HTML_SYNTAX</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mk1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk2</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span>

        <span class="n">uiutils</span><span class="o">.</span><span class="n">MyPlotPanel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    
        <span class="c1"># specific relationship between self and the parent? frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">GetParent</span><span class="p">()</span><span class="o">.</span><span class="n">GetParent</span><span class="p">()</span>
        
<div class="viewcode-block" id="AnalysisPlotPanel.set_color"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_color">[docs]</a>    <span class="k">def</span> <span class="nf">set_color</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rgb_tuple</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set figure and canvas with the same color.</span>
<span class="sd">        :param rgb_tuple: rgb color tuple, </span>
<span class="sd">                          e.g. (255, 255, 255) for white color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rgb_tuple</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">rgb_tuple</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">SystemSettings</span><span class="o">.</span><span class="n">GetColour</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">SYS_COLOUR_WINDOWFRAME</span><span class="p">)</span><span class="o">.</span><span class="n">Get</span><span class="p">()</span>
        <span class="n">clr</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span><span class="o">/</span><span class="mf">255.0</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">rgb_tuple</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_facecolor</span><span class="p">(</span><span class="n">clr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">set_edgecolor</span><span class="p">(</span><span class="n">clr</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_init_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

<div class="viewcode-block" id="AnalysisPlotPanel.on_press"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.on_press">[docs]</a>    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">draw_hvlines</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.on_release"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.on_release">[docs]</a>    <span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">pass</span></div>
        <span class="c1">#x0, y0 = event.xdata, event.ydata</span>
        <span class="c1">#self.x0, self.y0 = x0, y0</span>

<div class="viewcode-block" id="AnalysisPlotPanel.set_markflags"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_markflags">[docs]</a>    <span class="k">def</span> <span class="nf">set_markflags</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mk1</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">mk2</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mk1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk2</span> <span class="o">=</span> <span class="n">mk1</span><span class="p">,</span> <span class="n">mk2</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draw_hvlines1</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_pos1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pos1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk2</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draw_hvlines2</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x_pos2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pos2</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_mkc1"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_mkc1">[docs]</a>    <span class="k">def</span> <span class="nf">set_mkc1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mkc1</span> <span class="o">=</span> <span class="n">color</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_mkc2"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_mkc2">[docs]</a>    <span class="k">def</span> <span class="nf">set_mkc2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mkc2</span> <span class="o">=</span> <span class="n">color</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_pcc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_pcc">[docs]</a>    <span class="k">def</span> <span class="nf">set_pcc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pcc</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;pc1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;pc2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plbl1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl1</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plbl2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl2</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.draw_hvlines"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.draw_hvlines">[docs]</a>    <span class="k">def</span> <span class="nf">draw_hvlines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk1</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_hvlines1</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">mk2</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_hvlines2</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_deltxy</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div>

    <span class="k">def</span> <span class="nf">_draw_hvlines1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;hl1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hl1</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hl1</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mkc1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;vl1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vl1</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vl1</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mkc1</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;pc1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="s1">&#39;ko&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">mfc</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pc1</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plbl1&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl1</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="s1">r&#39;$\mathsf</span><span class="si">{M1}</span><span class="s1">$&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plbl1</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x_pos1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pos1</span> <span class="o">=</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">m1_pos_st</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0:.1f}</span><span class="s1">,</span><span class="si">{1:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_draw_hvlines2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;hl2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hl2</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">([</span><span class="n">y0</span><span class="p">,</span> <span class="n">y0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hl2</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mkc2</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;vl2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vl2</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">vl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vl2</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mkc2</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;pc2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="s1">&#39;ko&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">mfc</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">mec</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pc2</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;plbl2&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl2</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plbl2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="s1">r&#39;$\mathsf</span><span class="si">{M2}</span><span class="s1">$&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plbl2</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pcc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">x_pos2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y_pos2</span> <span class="o">=</span> <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">m2_pos_st</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{0:.1f}</span><span class="s1">,</span><span class="si">{1:.1f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>

<div class="viewcode-block" id="AnalysisPlotPanel.update_deltxy"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.update_deltxy">[docs]</a>    <span class="k">def</span> <span class="nf">update_deltxy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">m1_pos_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">m1_pos_st</span><span class="o">.</span><span class="n">GetLabel</span><span class="p">()</span>
        <span class="n">m2_pos_val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">m2_pos_st</span><span class="o">.</span><span class="n">GetLabel</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">m1_pos_val</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">m2_pos_val</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">m1_pos_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
            <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">m2_pos_val</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">delx_val_st</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0:.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dx</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mframe_point</span><span class="o">.</span><span class="n">dely_val_st</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{0:.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dy</span><span class="p">))</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_colormap"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_colormap">[docs]</a>    <span class="k">def</span> <span class="nf">set_colormap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmap</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cmap</span> <span class="o">=</span> <span class="n">cmap</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">set_cmap</span><span class="p">(</span><span class="n">cmap</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_linecolor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_linecolor">[docs]</a>    <span class="k">def</span> <span class="nf">set_linecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_color</span> <span class="o">=</span> <span class="n">color</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_fontsize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_fontsize">[docs]</a>    <span class="k">def</span> <span class="nf">set_fontsize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontsize</span><span class="p">):</span>
        <span class="n">x_lbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xlabel</span><span class="p">()</span>
        <span class="n">y_lbl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_ylabel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">x_lbl</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">y_lbl</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="o">+</span><span class="mi">4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_line_id"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_line_id">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;raw&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; selected current editable line,</span>
<span class="sd">            &#39;raw&#39;: raw data</span>
<span class="sd">            &#39;fitted&#39;: fitted lines</span>
<span class="sd">            &#39;none&#39;: hide all lines</span>
<span class="sd">            &#39;show&#39;: show all lines</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;show&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;raw&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;fit&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_lines"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_lines">[docs]</a>    <span class="k">def</span> <span class="nf">set_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">data</span>
        <span class="n">hx</span><span class="p">,</span> <span class="n">hy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">idxmaxx</span><span class="p">,</span> <span class="n">idxmaxy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hx</span> <span class="o">==</span> <span class="n">hx</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">hy</span> <span class="o">==</span> <span class="n">hy</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
        <span class="n">maxidx</span><span class="p">,</span> <span class="n">maxidy</span> <span class="o">=</span> <span class="n">idxmaxx</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">idxmaxy</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">hx</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">hy</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
        <span class="n">hx</span> <span class="o">=</span> <span class="n">hx</span><span class="o">/</span><span class="n">hx</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="n">maxidy</span>
        <span class="n">hy</span> <span class="o">=</span> <span class="n">hy</span><span class="o">/</span><span class="n">hy</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">*</span><span class="n">maxidx</span>

        <span class="n">res_x</span><span class="p">,</span> <span class="n">fm_x</span> <span class="o">=</span> <span class="n">gaussian_fit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">hx</span><span class="p">)</span>
        <span class="n">res_y</span><span class="p">,</span> <span class="n">fm_y</span> <span class="o">=</span> <span class="n">gaussian_fit</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">hy</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">hx</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">hy</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mfc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mfc</span><span class="p">)</span>

        <span class="c1"># fitted lines</span>
        <span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">200</span><span class="p">)</span>
        <span class="n">y_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="mi">200</span><span class="p">)</span>
        <span class="n">fx</span><span class="p">,</span> <span class="n">tx</span> <span class="o">=</span> <span class="n">fm_x</span><span class="o">.</span><span class="n">get_fitfunc</span><span class="p">(</span><span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
        <span class="n">fy</span><span class="p">,</span> <span class="n">ty</span> <span class="o">=</span> <span class="n">fm_y</span><span class="o">.</span><span class="n">get_fitfunc</span><span class="p">(</span><span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="n">fx</span><span class="p">(</span><span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">x_fit</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fy</span><span class="p">(</span><span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">),</span> <span class="n">y_fit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line_color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mfc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mec</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mfc</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>

        <span class="c1"># hide all lines</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">res_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_y</span> <span class="o">=</span> <span class="n">res_x</span><span class="p">,</span> <span class="n">res_y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.get_fit_report"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.get_fit_report">[docs]</a>    <span class="k">def</span> <span class="nf">get_fit_report</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">xoy</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return fitting report if success,</span>
<span class="sd">            else return None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">xoy</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_x</span><span class="o">.</span><span class="n">params</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_y</span><span class="o">.</span><span class="n">params</span>
        <span class="n">retstr2</span> <span class="o">=</span> <span class="s2">&quot;f(x) = a*exp(-(x-x0)^2/2/sx^2)+y0&quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">retstr4</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="si">{a0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{a0_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a0_k</span><span class="o">=</span><span class="s1">&#39;a&#39;</span> <span class="p">,</span> <span class="n">a0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">retstr5</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="si">{x0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{x0_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x0_k</span><span class="o">=</span><span class="s1">&#39;x0&#39;</span><span class="p">,</span> <span class="n">x0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">retstr6</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="si">{sx_k:&lt;3s}</span><span class="s2">: </span><span class="si">{sx_v:&gt;10.4f}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sx_k</span><span class="o">=</span><span class="s1">&#39;sx&#39;</span><span class="p">,</span> <span class="n">sx_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">retstr7</span> <span class="o">=</span> <span class="s2">&quot; </span><span class="si">{y0_k:&lt;3s}</span><span class="s2">: </span><span class="si">{y0_v:&gt;10.4f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y0_k</span><span class="o">=</span><span class="s1">&#39;y0&#39;</span><span class="p">,</span> <span class="n">y0_v</span><span class="o">=</span><span class="n">p</span><span class="p">[</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">retval</span> <span class="o">=</span> <span class="n">retstr2</span> <span class="o">+</span> <span class="n">retstr4</span> <span class="o">+</span> <span class="n">retstr5</span> <span class="o">+</span> <span class="n">retstr6</span> <span class="o">+</span> <span class="n">retstr7</span>
        <span class="k">if</span> <span class="s1">&#39;nan&#39;</span> <span class="ow">in</span> <span class="n">retval</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">retval</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_figure_data"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_figure_data">[docs]</a>    <span class="k">def</span> <span class="nf">set_figure_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">fit</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;axes&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">cmap</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">fit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set_lines</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dimx</span><span class="p">,</span> <span class="n">dimy</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="o">.</span><span class="n">shape</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dimy</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">dimx</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_linestyle"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_linestyle">[docs]</a>    <span class="k">def</span> <span class="nf">set_linestyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ls</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_marker"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_marker">[docs]</a>    <span class="k">def</span> <span class="nf">set_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mk</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="n">mk</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_markersize"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_markersize">[docs]</a>    <span class="k">def</span> <span class="nf">set_markersize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ms</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="n">ms</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_mec"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_mec">[docs]</a>    <span class="k">def</span> <span class="nf">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mec</span> <span class="o">=</span> <span class="n">c</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_mfc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_mfc">[docs]</a>    <span class="k">def</span> <span class="nf">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mfc</span> <span class="o">=</span> <span class="n">c</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_linewidth"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_linewidth">[docs]</a>    <span class="k">def</span> <span class="nf">set_linewidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lw</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="n">lw</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_list</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_ticks"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_ticks">[docs]</a>    <span class="k">def</span> <span class="nf">set_ticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="s1">&#39;half&#39;</span><span class="p">):</span>
        <span class="c1"># ticks position</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;half&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="s1">&#39;off&#39;</span><span class="p">,</span><span class="s1">&#39;off&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labeltop</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelright</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> 
        <span class="k">elif</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="s1">&#39;on&#39;</span><span class="p">,</span><span class="s1">&#39;on&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labeltop</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelright</span><span class="o">=</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_mticks"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_mticks">[docs]</a>    <span class="k">def</span> <span class="nf">set_mticks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">flag</span><span class="o">=</span><span class="s1">&#39;off&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">minorticks_on</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">flag</span> <span class="o">==</span> <span class="s1">&#39;off&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">minorticks_off</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_grids"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_grids">[docs]</a>    <span class="k">def</span> <span class="nf">set_grids</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">b</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="n">which</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_origin"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_origin">[docs]</a>    <span class="k">def</span> <span class="nf">set_origin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ll</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ul</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ur</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lr</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">ll</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direct_xyaxis</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ul</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direct_xyaxis</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ur</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direct_xyaxis</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;top&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lr</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">direct_xyaxis</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_ticks_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;bottom&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_position</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.get_clim"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.get_clim">[docs]</a>    <span class="k">def</span> <span class="nf">get_clim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">clim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_clim</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{cmin:.1f}</span><span class="s2"> : </span><span class="si">{cmax:.1f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cmin</span><span class="o">=</span><span class="n">clim</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">cmax</span><span class="o">=</span><span class="n">clim</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.set_clim"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.set_clim">[docs]</a>    <span class="k">def</span> <span class="nf">set_clim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cr</span><span class="p">):</span>
        <span class="n">clim</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">cr</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">set_clim</span><span class="p">(</span><span class="n">clim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.direct_xyaxis"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.direct_xyaxis">[docs]</a>    <span class="k">def</span> <span class="nf">direct_xyaxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_direction</span><span class="p">,</span> <span class="n">y_direction</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_direction</span> <span class="o">!=</span> <span class="n">x_direction</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">invert_xaxis</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_direction</span> <span class="o">=</span> <span class="n">x_direction</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_direction</span> <span class="o">!=</span> <span class="n">y_direction</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">invert_yaxis</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaxis_direction</span> <span class="o">=</span> <span class="n">y_direction</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.hide_image"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.hide_image">[docs]</a>    <span class="k">def</span> <span class="nf">hide_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hide_flag</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="ow">not</span> <span class="n">hide_flag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.clear"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;axes&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">cla</span><span class="p">()</span></div>

<div class="viewcode-block" id="AnalysisPlotPanel.get_data"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.AnalysisPlotPanel.get_data">[docs]</a>    <span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return data: image, raw data, fit data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;image&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">get_array</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">][</span><span class="s1">&#39;prof_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linex</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">][</span><span class="s1">&#39;prof_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">][</span><span class="s1">&#39;prof_x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">linex_fit</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;fit&#39;</span><span class="p">][</span><span class="s1">&#39;prof_y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">liney_fit</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">][</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">][</span><span class="s1">&#39;sx&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_x</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">][</span><span class="s1">&#39;y0&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;x0&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="n">data</span><span class="p">[</span><span class="s1">&#39;attr&#39;</span><span class="p">][</span><span class="s1">&#39;sy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">res_y</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;xstd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
        <span class="k">return</span> <span class="n">data</span></div></div>


<div class="viewcode-block" id="ScanPlotPanel"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel">[docs]</a><span class="k">class</span> <span class="nc">ScanPlotPanel</span><span class="p">(</span><span class="n">AnalysisPlotPanel</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">AnalysisPlotPanel</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_mks</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_lines</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_init_config</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_init_plot_new</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_init_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_init_plot_new</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xerrarr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yerrarr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;axes&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ebplot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span>
                                         <span class="n">xerr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">xerrarr</span><span class="p">,</span> <span class="n">yerr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yerrarr</span><span class="p">,</span>
                                         <span class="n">fmt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_fmt</span><span class="p">,</span> 

                                         <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_linecolor</span><span class="p">,</span> 
                                         <span class="n">linewidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_lw</span><span class="p">,</span>
                                         <span class="n">ls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_ls</span><span class="p">,</span>
                                         <span class="n">marker</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_marker</span><span class="p">,</span> 
                                         <span class="n">ms</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_ms</span><span class="p">,</span>
                                         <span class="n">mfc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_mfc</span><span class="p">,</span>
                                         <span class="n">mec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_mec</span><span class="p">,</span>

                                         <span class="n">elinewidth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_lw</span><span class="p">,</span>
                                         <span class="n">ecolor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_markercolor</span><span class="p">,</span> 
                                         <span class="n">capsize</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_markersize</span><span class="p">,</span>
                                         <span class="n">capthick</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_mew</span><span class="p">,</span>
                                         <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_mks</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ebplot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="p">,],</span> <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="p">,]}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_init_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_fmt</span>         <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_markercolor</span> <span class="o">=</span> <span class="s1">&#39;#1E90FF&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_markersize</span>  <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_mew</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eb_lw</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">avg_ls</span>  <span class="o">=</span> <span class="s1">&#39;--&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_lw</span>  <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_linecolor</span>  <span class="o">=</span> <span class="s1">&#39;g&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_mfc</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_mec</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_ms</span>  <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avg_marker</span> <span class="o">=</span> <span class="s1">&#39;H&#39;</span>
    
<div class="viewcode-block" id="ScanPlotPanel.get_edit_obj"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_edit_obj">[docs]</a>    <span class="k">def</span> <span class="nf">get_edit_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span></div>

<div class="viewcode-block" id="ScanPlotPanel.get_mean_line"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_mean_line">[docs]</a>    <span class="k">def</span> <span class="nf">get_mean_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span></div>
    
<div class="viewcode-block" id="ScanPlotPanel.get_errorbar_mks"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_errorbar_mks">[docs]</a>    <span class="k">def</span> <span class="nf">get_errorbar_mks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_mks</span></div>

<div class="viewcode-block" id="ScanPlotPanel.get_errorbar_line"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_errorbar_line">[docs]</a>    <span class="k">def</span> <span class="nf">get_errorbar_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_lines</span></div>

<div class="viewcode-block" id="ScanPlotPanel.get_fit_line"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_fit_line">[docs]</a>    <span class="k">def</span> <span class="nf">get_fit_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_fit_model"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_fit_model">[docs]</a>    <span class="k">def</span> <span class="nf">set_fit_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="s1">&#39;gaussian&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span>
        <span class="n">fit_model</span> <span class="o">=</span> <span class="n">FitModels</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">)</span>
        <span class="n">fit_model</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s1">&#39;leastsq&#39;</span>
        <span class="n">fit_model</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
        <span class="n">p0</span> <span class="o">=</span> <span class="n">fit_model</span><span class="o">.</span><span class="n">calc_p0</span><span class="p">()</span>
        <span class="n">fit_model</span><span class="o">.</span><span class="n">set_params</span><span class="p">(</span><span class="o">**</span><span class="n">p0</span><span class="p">)</span>
        <span class="n">fit_res</span> <span class="o">=</span> <span class="n">fit_model</span><span class="o">.</span><span class="n">fit</span><span class="p">()</span>
        <span class="n">fx</span><span class="p">,</span> <span class="n">tx</span> <span class="o">=</span> <span class="n">fit_model</span><span class="o">.</span><span class="n">get_fitfunc</span><span class="p">(</span><span class="n">fit_res</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fx</span> <span class="o">=</span> <span class="n">fx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_res</span> <span class="o">=</span> <span class="n">fit_res</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_model</span> <span class="o">=</span> <span class="n">fit_model</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_fit_line"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_fit_line">[docs]</a>    <span class="k">def</span> <span class="nf">set_fit_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point_num</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; apply fitting model to average curve</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span>
        <span class="n">x_fit_min</span><span class="p">,</span> <span class="n">x_fit_max</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmin&#39;</span><span class="p">),</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xmax&#39;</span><span class="p">)</span>
        <span class="n">xmin</span> <span class="o">=</span> <span class="n">x_fit_min</span> <span class="k">if</span> <span class="n">x_fit_min</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
        <span class="n">xmax</span> <span class="o">=</span> <span class="n">x_fit_max</span> <span class="k">if</span> <span class="n">x_fit_max</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">x_fit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">,</span> <span class="n">point_num</span><span class="p">)</span>
        <span class="n">y_fit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fit_res</span><span class="o">.</span><span class="n">params</span><span class="p">,</span> <span class="n">x_fit</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_fit</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">ls</span><span class="o">=</span><span class="s1">&#39;solid&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="ScanPlotPanel.get_fit_result"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_fit_result">[docs]</a>    <span class="k">def</span> <span class="nf">get_fit_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_res</span></div>

<div class="viewcode-block" id="ScanPlotPanel.get_fit_model"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_fit_model">[docs]</a>    <span class="k">def</span> <span class="nf">get_fit_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fit_model</span></div>
    
<div class="viewcode-block" id="ScanPlotPanel.hide_fit_line"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.hide_fit_line">[docs]</a>    <span class="k">def</span> <span class="nf">hide_fit_line</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="ScanPlotPanel.set_line_id"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_line_id">[docs]</a>    <span class="k">def</span> <span class="nf">set_line_id</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="o">=</span><span class="s1">&#39;Average Curve&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; selected current editable line,</span>
<span class="sd">            &#39;Average Curve&#39;: curve of mean value of every iteration</span>
<span class="sd">            &#39;Errorbars&#39;    : errorbars, x and y</span>
<span class="sd">            &#39;Fitting Curve&#39;: fitting curve of average curve</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;Average Curve&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="p">],</span> <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="p">,]}</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;Errorbars&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_mks</span><span class="p">,</span>       <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">eb_lines</span><span class="p">}</span>
        <span class="k">elif</span> <span class="n">line</span> <span class="o">==</span> <span class="s1">&#39;Fitting Curve&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;marker&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="p">,],</span>  <span class="s1">&#39;line&#39;</span><span class="p">:</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="p">,]}</span></div>

<div class="viewcode-block" id="ScanPlotPanel.repaint"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.repaint">[docs]</a>    <span class="k">def</span> <span class="nf">repaint</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjustErrbar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ebplot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">xerrarr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">yerrarr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">relim</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">autoscale_view</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.adjustErrbar"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.adjustErrbar">[docs]</a>    <span class="k">def</span> <span class="nf">adjustErrbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">err</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x_error</span><span class="p">,</span> <span class="n">y_error</span><span class="p">):</span>
        <span class="n">ln</span><span class="p">,</span> <span class="p">(</span><span class="n">errx_top</span><span class="p">,</span> <span class="n">errx_bot</span><span class="p">,</span> <span class="n">erry_top</span><span class="p">,</span> <span class="n">erry_bot</span><span class="p">),</span> <span class="p">(</span><span class="n">barsx</span><span class="p">,</span> <span class="n">barsy</span><span class="p">)</span> <span class="o">=</span> <span class="n">err</span>

        <span class="n">ln</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">x_base</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">y_base</span> <span class="o">=</span> <span class="n">y</span>

        <span class="n">xerr_top</span> <span class="o">=</span> <span class="n">x_base</span> <span class="o">+</span> <span class="n">x_error</span>
        <span class="n">xerr_bot</span> <span class="o">=</span> <span class="n">x_base</span> <span class="o">-</span> <span class="n">x_error</span>
        <span class="n">yerr_top</span> <span class="o">=</span> <span class="n">y_base</span> <span class="o">+</span> <span class="n">y_error</span>
        <span class="n">yerr_bot</span> <span class="o">=</span> <span class="n">y_base</span> <span class="o">-</span> <span class="n">y_error</span>

        <span class="n">errx_top</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">(</span><span class="n">xerr_top</span><span class="p">)</span>
        <span class="n">errx_bot</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">(</span><span class="n">xerr_bot</span><span class="p">)</span>
        <span class="n">errx_top</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">y_base</span><span class="p">)</span>
        <span class="n">errx_bot</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">y_base</span><span class="p">)</span>

        <span class="n">erry_top</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">(</span><span class="n">x_base</span><span class="p">)</span>
        <span class="n">erry_bot</span><span class="o">.</span><span class="n">set_xdata</span><span class="p">(</span><span class="n">x_base</span><span class="p">)</span>
        <span class="n">erry_top</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">yerr_top</span><span class="p">)</span>
        <span class="n">erry_bot</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">yerr_bot</span><span class="p">)</span>

        <span class="n">new_segments_x</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">xt</span><span class="p">,</span> <span class="n">y</span><span class="p">],</span> <span class="p">[</span><span class="n">xb</span><span class="p">,</span><span class="n">y</span><span class="p">]])</span> <span class="k">for</span> <span class="n">xt</span><span class="p">,</span> <span class="n">xb</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">xerr_top</span><span class="p">,</span> <span class="n">xerr_bot</span><span class="p">,</span> <span class="n">y_base</span><span class="p">)]</span>
        <span class="n">new_segments_y</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">x</span><span class="p">,</span> <span class="n">yt</span><span class="p">],</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">yb</span><span class="p">]])</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">yt</span><span class="p">,</span> <span class="n">yb</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x_base</span><span class="p">,</span> <span class="n">yerr_top</span><span class="p">,</span> <span class="n">yerr_bot</span><span class="p">)]</span>
        <span class="n">barsx</span><span class="o">.</span><span class="n">set_segments</span><span class="p">(</span><span class="n">new_segments_x</span><span class="p">)</span>
        <span class="n">barsy</span><span class="o">.</span><span class="n">set_segments</span><span class="p">(</span><span class="n">new_segments_y</span><span class="p">)</span></div>

<div class="viewcode-block" id="ScanPlotPanel.on_motion"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.on_motion">[docs]</a>    <span class="k">def</span> <span class="nf">on_motion</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">:</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pos_st</span><span class="o">.</span><span class="n">SetLabel</span><span class="p">(</span><span class="s1">&#39;(</span><span class="si">{x:&lt;.4f}</span><span class="s1">, </span><span class="si">{y:&lt;.4f}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y0</span><span class="p">))</span></div>
            <span class="c1">#self._draw_hvlines1(x0, y0)</span>

<div class="viewcode-block" id="ScanPlotPanel.set_linecolor"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_linecolor">[docs]</a>    <span class="k">def</span> <span class="nf">set_linecolor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_linestyle"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_linestyle">[docs]</a>    <span class="k">def</span> <span class="nf">set_linestyle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ls</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_linestyle</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_linewidth"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_linewidth">[docs]</a>    <span class="k">def</span> <span class="nf">set_linewidth</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lw</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="n">lw</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;line&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_marker"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_marker">[docs]</a>    <span class="k">def</span> <span class="nf">set_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mk</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="n">mk</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_mks"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_mks">[docs]</a>    <span class="k">def</span> <span class="nf">set_mks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mks</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_markersize</span><span class="p">(</span><span class="n">mks</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_mew"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_mew">[docs]</a>    <span class="k">def</span> <span class="nf">set_mew</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mew</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_mew</span><span class="p">(</span><span class="n">mew</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_mfc"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_mfc">[docs]</a>    <span class="k">def</span> <span class="nf">set_mfc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_mec"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_mec">[docs]</a>    <span class="k">def</span> <span class="nf">set_mec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]</span>
        <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_edit_obj</span><span class="p">[</span><span class="s1">&#39;marker&#39;</span><span class="p">]]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_grid"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_grid">[docs]</a>    <span class="k">def</span> <span class="nf">set_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_legend"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_legend">[docs]</a>    <span class="k">def</span> <span class="nf">set_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">show_val</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">show_val</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legend_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">l_avg</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avg&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;avg&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;Average&#39;</span>
                <span class="n">l_fit</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fit&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fit&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">&#39;Fitting&#39;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_mean</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">l_avg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">line_fit</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">l_fit</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legend_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_title"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_title">[docs]</a>    <span class="k">def</span> <span class="nf">set_title</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">show_val</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">show_val</span><span class="p">:</span>  <span class="c1"># if auto_title is ticked, show title, else not</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time_now</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S %Z&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">())</span>
            <span class="n">title_str</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;title&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">time_now</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_xlabel"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_xlabel">[docs]</a>    <span class="k">def</span> <span class="nf">set_xlabel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="n">show_val</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;show&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">show_val</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">xlabel_str</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xlabel&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;xlabel&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s1">u&#39;$x$&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel_box</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel_str</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">xlabel_box</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.set_text"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.set_text">[docs]</a>    <span class="k">def</span> <span class="nf">set_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; set fitting result output as a Text object</span>
<span class="sd">            :param text: fitting result text from FitModels class</span>
<span class="sd">            available keys of kws:, x, y, fontsize</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;func_text&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;#E6E5E4&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">transform</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">transData</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fontsize&#39;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">kws</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">kws</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">text</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;#E6E5E4&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">),</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fontsize&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">set_picker</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.update_text"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.update_text">[docs]</a>    <span class="k">def</span> <span class="nf">update_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kws</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; available keys of kws:, x, y, fontsize</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fs</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fontsize&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">get_fontsize</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="n">fs</span><span class="p">)</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">),</span> <span class="n">kws</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
        <span class="n">o_x</span><span class="p">,</span> <span class="n">o_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">o_x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">o_y</span> <span class="o">=</span> <span class="n">y</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">func_text</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">o_x</span><span class="p">,</span> <span class="n">o_y</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>
    
<div class="viewcode-block" id="ScanPlotPanel.on_pick"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.on_pick">[docs]</a>    <span class="k">def</span> <span class="nf">on_pick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span> <span class="n">mText</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pick_pos</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">mouseevent</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">mouseevent</span><span class="o">.</span><span class="n">ydata</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">artist</span><span class="p">,</span> <span class="n">mLine</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_p0</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">artist</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">ind</span>
            <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_p0</span><span class="o">.</span><span class="n">get_data</span><span class="p">()</span>
            <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">idx</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pt0</span><span class="p">,</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">)</span>
                <span class="n">pt0</span><span class="o">.</span><span class="n">set_marker</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_p0</span><span class="o">.</span><span class="n">get_marker</span><span class="p">())</span>
                <span class="n">pt0</span><span class="o">.</span><span class="n">set_ms</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_p0</span><span class="o">.</span><span class="n">get_ms</span><span class="p">())</span>
                <span class="n">pt0</span><span class="o">.</span><span class="n">set_mew</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span>
                <span class="n">ic</span> <span class="o">=</span> <span class="n">invert_color_hex</span><span class="p">(</span><span class="n">color_to_hex</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_p0</span><span class="o">.</span><span class="n">get_mfc</span><span class="p">()))</span>
                <span class="n">pt0</span><span class="o">.</span><span class="n">set_mec</span><span class="p">(</span><span class="n">ic</span><span class="p">)</span>
                <span class="n">pt0</span><span class="o">.</span><span class="n">set_mfc</span><span class="p">(</span><span class="n">ic</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="n">pt0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="p">[</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.get_pick_pt"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.get_pick_pt">[docs]</a>    <span class="k">def</span> <span class="nf">get_pick_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; return picked points dict</span>
<span class="sd">        {k:v}, k: index, v: drawing artist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span></div>

<div class="viewcode-block" id="ScanPlotPanel.clear_pick_pt"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.clear_pick_pt">[docs]</a>    <span class="k">def</span> <span class="nf">clear_pick_pt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; clear picked points (which are picked for retaking)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="n">v</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pick_pt</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div>

<div class="viewcode-block" id="ScanPlotPanel.on_press"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.on_press">[docs]</a>    <span class="k">def</span> <span class="nf">on_press</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">pass</span></div>
        <span class="c1">#print event.xdata, event.ydata</span>

<div class="viewcode-block" id="ScanPlotPanel.on_release"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.ScanPlotPanel.on_release">[docs]</a>    <span class="k">def</span> <span class="nf">on_release</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">inaxes</span><span class="p">:</span>
            <span class="n">n_x</span><span class="p">,</span> <span class="n">n_y</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">xdata</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">ydata</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">o_x</span><span class="p">,</span> <span class="n">o_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span><span class="o">.</span><span class="n">get_position</span><span class="p">()</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">o_x</span> <span class="o">+</span> <span class="n">n_x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">o_y</span> <span class="o">+</span> <span class="n">n_y</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">pick_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span><span class="o">.</span><span class="n">set_position</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pick_obj_text</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span></div></div>

<div class="viewcode-block" id="pick_color"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.pick_color">[docs]</a><span class="k">def</span> <span class="nf">pick_color</span><span class="p">():</span>
    <span class="n">dlg</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ColourDialog</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">dlg</span><span class="o">.</span><span class="n">GetColourData</span><span class="p">()</span><span class="o">.</span><span class="n">SetChooseFull</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># only windows</span>
    <span class="k">if</span> <span class="n">dlg</span><span class="o">.</span><span class="n">ShowModal</span><span class="p">()</span> <span class="o">==</span> <span class="n">wx</span><span class="o">.</span><span class="n">ID_OK</span><span class="p">:</span>
        <span class="n">color</span> <span class="o">=</span> <span class="n">dlg</span><span class="o">.</span><span class="n">GetColourData</span><span class="p">()</span><span class="o">.</span><span class="n">GetColour</span><span class="p">()</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">Destroy</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">color</span></div>


<div class="viewcode-block" id="set_staticbmp_color"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.set_staticbmp_color">[docs]</a><span class="k">def</span> <span class="nf">set_staticbmp_color</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    obj: staticbitmap, bitmapbutton</span>
<span class="sd">    color: could be returned by pick_color()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">color</span><span class="o">.</span><span class="n">Red</span><span class="p">(),</span> <span class="n">color</span><span class="o">.</span><span class="n">Green</span><span class="p">(),</span> <span class="n">color</span><span class="o">.</span><span class="n">Blue</span><span class="p">()</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">16</span>
    <span class="n">bmp</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">EmptyBitmap</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">wx</span><span class="o">.</span><span class="n">ImageFromBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span>
    <span class="n">img</span><span class="o">.</span><span class="n">SetRGBRect</span><span class="p">(</span><span class="n">wx</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">),</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
    <span class="n">obj</span><span class="o">.</span><span class="n">SetBitmap</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">ConvertToBitmap</span><span class="p">())</span></div>


<div class="viewcode-block" id="get_range"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.get_range">[docs]</a><span class="k">def</span> <span class="nf">get_range</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; find array range,</span>
<span class="sd">        :param x: orignal numpy array, 1d</span>
<span class="sd">        :param xmin: x min of range</span>
<span class="sd">        :param xmax: x max of range</span>
<span class="sd">        return range_index and array</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">xmin</span> <span class="o">&gt;=</span> <span class="n">xmax</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
    <span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">xmin</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">xmax</span><span class="p">)</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">intersect1d</span><span class="p">(</span><span class="n">idx1</span><span class="p">,</span> <span class="n">idx2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">[</span><span class="n">idx</span><span class="p">],</span> <span class="n">idx</span></div>


<div class="viewcode-block" id="color_to_hex"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.color_to_hex">[docs]</a><span class="k">def</span> <span class="nf">color_to_hex</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; convert matplotlib colors into hex string format,</span>
<span class="sd">    e.g.</span>
<span class="sd">    1 color_to_hex(&#39;r&#39;) = &#39;#FF0000&#39;</span>
<span class="sd">    2 color_to_hex(&#39;red&#39;) = &#39;#FF0000&#39;</span>
<span class="sd">    3 color_to_hex(&#39;#FF0000&#39;) = &#39;#FF0000&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="p">):</span>
        <span class="n">clr</span> <span class="o">=</span> <span class="n">c</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">clr</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">rgb2hex</span><span class="p">(</span><span class="n">colors</span><span class="o">.</span><span class="n">colorConverter</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="n">c</span><span class="p">])</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">clr</span> <span class="o">=</span> <span class="n">colors</span><span class="o">.</span><span class="n">cnames</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">clr</span></div>


<div class="viewcode-block" id="invert_color_hex"><a class="viewcode-back" href="../../../src/apidocs/felapps.utils.html#felapps.utils.funutils.invert_color_hex">[docs]</a><span class="k">def</span> <span class="nf">invert_color_hex</span><span class="p">(</span><span class="n">hex_color_str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; invert hex colors,</span>
<span class="sd">    e.g. invert_color_hex(&#39;#FFFFFF&#39;) = &#39;#000000&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">maketrans</span><span class="p">(</span><span class="s1">&#39;0123456789abcdef&#39;</span><span class="p">,</span> <span class="s1">&#39;fedcba9876543210&#39;</span><span class="p">)</span>
    <span class="n">hex_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">hex_color_str</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="k">return</span> <span class="s1">&#39;#&#39;</span> <span class="o">+</span> <span class="n">hex_str</span><span class="o">.</span><span class="n">translate</span><span class="p">(</span><span class="n">table</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">felapps 1.5.13 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Tong Zhang.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.5.
    </div>
  </body>
</html>